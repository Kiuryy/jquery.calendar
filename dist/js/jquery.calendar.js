/*! jquery.calendar v1.1.0 | (c) Philipp KÃ¶nig under Apache-2.0 | https://blockbyte.de */
(e=>{"use strict";let a=function(a){let t,s={startDate:new Date,minDate:null,maxDate:null,monthNames:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Mo","Di","Mi","Do","Fr","Sa","So"],prevNextButtons:!0,gotoTodayButton:!0,classes:{calendar:"jc-calendar",header:"jc-header",prevMonth:"jc-prev",nextMonth:"jc-next",gotoToday:"jc-gotoToday",selectMonth:"jc-select-month",selectYear:"jc-select-year",dayLabels:"jc-dayLabels",dayWrapper:"jc-days",day:"jc-day",dayInactive:"jc-inactive",dayToday:"jc-today",dayEmpty:"jc-empty",hidden:"jc-hidden"},onInited:()=>{},onDayMouseenter:()=>{},onDayMouseleave:()=>{},onDayClick:()=>{},onMonthChange:()=>{},onYearChange:()=>{},onDateChange:()=>{}},n=null,l=new Date,r=()=>{e.each(["minDate","maxDate"],(e,a)=>{if(!(t[a]instanceof Date)){let e=t[a];if("today"===e||0===e.search(/^(\-|\+?)\d+[dwmy]$/)){if(t[a]=new Date,"today"!==e){let s=(e=e.replace(/^\+/,"")).slice(0,-1);switch(e[e.length-1]){case"d":t[a].setDate(t[a].getDate()+parseInt(s));break;case"w":t[a].setDate(t[a].getDate()+7*parseInt(s));break;case"m":t[a].setMonth(t[a].getMonth()+parseInt(s));break;case"y":t[a].setFullYear(t[a].getFullYear()+parseInt(s))}}}else t[a]=null}}),t.minDate.getTime()>t.maxDate.getTime()&&(t.minDate=new Date(t.maxDate.getTime())),d(),h(),o(),c()},d=()=>{null!==t.maxDate&&n.getTime()>t.maxDate.getTime()?n=new Date(t.maxDate.getTime()):null!==t.minDate&&n.getTime()<t.minDate.getTime()&&(n=new Date(t.minDate.getTime()))},o=()=>{let s=a.find("header."+t.classes.header+" > select."+t.classes.selectMonth).empty();for(let a=0;a<12;a++){let l=new Date(n.getFullYear(),a+1,0,23,59,59),r=new Date(n.getFullYear(),a,1,0,0,0);if((null===t.minDate||l.getTime()>t.minDate.getTime())&&(null===t.maxDate||r.getTime()<t.maxDate.getTime())){let l=e("<option />").val(a).text(t.monthNames[a]).appendTo(s);a===n.getMonth()&&l.attr("selected","selected")}}},h=()=>{let s={min:n.getFullYear()+5,max:n.getFullYear()-10};null!==t.minDate&&(s.min=t.minDate.getFullYear()),null!==t.maxDate&&(s.max=t.maxDate.getFullYear());let l=a.find("header."+t.classes.header+" > select."+t.classes.selectYear).empty();for(let a=s.max;a>=s.min;a--){let t=e("<option />").val(a).text(a).appendTo(l);a===n.getFullYear()&&t.attr("selected","selected")}},c=()=>{a.find("header."+t.classes.header+" > a."+t.classes.nextMonth).removeClass(t.classes.hidden),a.find("header."+t.classes.header+" > a."+t.classes.prevMonth).removeClass(t.classes.hidden),a.find("header."+t.classes.header+" > a."+t.classes.gotoToday).removeClass(t.classes.hidden),p(n.getFullYear(),n.getMonth(),0).inBounds||a.find("header."+t.classes.header+" > a."+t.classes.prevMonth).addClass(t.classes.hidden),p(n.getFullYear(),n.getMonth()+1,1).inBounds||a.find("header."+t.classes.header+" > a."+t.classes.nextMonth).addClass(t.classes.hidden),n.getFullYear()===l.getFullYear()&&n.getMonth()===l.getMonth()&&a.find("header."+t.classes.header+" > a."+t.classes.gotoToday).addClass(t.classes.hidden)},i=a=>{let s=n.getFullYear(),l=n.getMonth();e.each(a,(e,a)=>{switch(e){case"year":n.setFullYear(a);break;case"month":n.setMonth(a);break;case"day":n.setDate(a)}}),d(),h(),o(),c(),y(),l!==n.getMonth()&&t.onMonthChange({calendar:this.getCalendar(),daysOfCurrentMonth:this.getDaysOfCurrentMonth(),date:this.getCurrentDate()}),s!==n.getFullYear()&&t.onYearChange({calendar:this.getCalendar(),daysOfCurrentMonth:this.getDaysOfCurrentMonth(),date:this.getCurrentDate()}),s===n.getFullYear()&&l===n.getMonth()||t.onDateChange({calendar:this.getCalendar(),daysOfCurrentMonth:this.getDaysOfCurrentMonth(),date:this.getCurrentDate()})},g=()=>{a.on("change","header."+t.classes.header+" > select."+t.classes.selectYear,a=>{i({event:a,year:e(a.currentTarget).val()})}),a.on("change","header."+t.classes.header+" > select."+t.classes.selectMonth,a=>{i({event:a,month:e(a.currentTarget).val()})}),a.on("click","div."+t.classes.dayWrapper+" > div > a",a=>{a.preventDefault(),t.onDayClick({event:a,calendar:this.getCalendar(),elm:e(a.currentTarget).parent("div"),date:e(a.currentTarget).data("date")})}).on("mouseenter","div."+t.classes.dayWrapper+" > div > a",a=>{a.preventDefault(),t.onDayMouseenter({event:a,calendar:this.getCalendar(),elm:e(a.currentTarget).parent("div"),date:e(a.currentTarget).data("date")})}).on("mouseleave","div."+t.classes.dayWrapper+" > div > a",a=>{a.preventDefault(),t.onDayMouseleave({event:a,calendar:this.getCalendar(),elm:e(a.currentTarget).parent("div"),date:e(a.currentTarget).data("date")})}),a.on("click","header."+t.classes.header+" > a."+t.classes.nextMonth+", header."+t.classes.header+" > a."+t.classes.prevMonth,a=>{a.preventDefault();let s=e(a.currentTarget).hasClass(t.classes.prevMonth)?-1:1;i({month:n.getMonth()+s})}),a.on("click","header."+t.classes.header+" > a."+t.classes.gotoToday,e=>{e.preventDefault(),i({year:l.getFullYear(),month:l.getMonth()})})},u=()=>{a.empty();let s=e("<div />").addClass(t.classes.calendar).appendTo(a),n=e("<header />").addClass(t.classes.header).appendTo(s);t.prevNextButtons&&(e("<a />").attr("href","#").addClass(t.classes.prevMonth).appendTo(n),e("<a />").attr("href","#").addClass(t.classes.nextMonth).appendTo(n)),t.gotoTodayButton&&p(l.getFullYear(),l.getMonth(),l.getDate()).inBounds&&e("<a />").attr("href","#").addClass(t.classes.gotoToday).appendTo(n),e("<select />").addClass(t.classes.selectMonth).appendTo(n),e("<select />").addClass(t.classes.selectYear).appendTo(n);let r=e("<div />").addClass(t.classes.dayLabels).appendTo(n);for(let a=0;a<7;a++)e("<div />").text(t.dayNames[a]).appendTo(r);let d=e("<div />").addClass(t.classes.dayWrapper).appendTo(s);for(let a=0;a<42;a++)e("<div />").addClass(t.classes.day).attr("data-col",a%7).appendTo(d)},m=()=>{let e=n.getFullYear(),a=n.getMonth()+1;return 2===a?3&e||!(e%25)&&15&e?28:29:30+(a+(a>>3)&1)},p=(e,a,s)=>{let n={min:new Date(e,a,s,23,59,59),max:new Date(e,a,s,0,0,0)},r={inBounds:!0,today:!1};return l.getDate()===n.min.getDate()&&l.getMonth()===n.min.getMonth()&&l.getFullYear()===n.min.getFullYear()&&(r.today=!0),null!==t.minDate&&t.minDate>n.min.getTime()?r.inBounds=!1:null!==t.maxDate&&t.maxDate<n.max.getTime()&&(r.inBounds=!1),r},y=()=>{let s=new Date(n.getFullYear(),n.getMonth(),1,0,0,0,0).getDay()-1;s=s<0?s+7:s;let l=a.find("div."+t.classes.dayWrapper+" > div."+t.classes.day);l.empty().removeData("date").addClass(t.classes.dayEmpty).removeClass(t.classes.hidden).removeClass(t.classes.dayInactive).removeClass(t.classes.dayToday);let r=1,d=m();for(let a=s;a<s+d;a++){let s=l.eq(a).removeClass(t.classes.dayEmpty),d=p(n.getFullYear(),n.getMonth(),r);d.today&&s.addClass(t.classes.dayToday),d.inBounds?e("<a />").attr("href","#").data("date",new Date(n.getFullYear(),n.getMonth(),r)).text(r).appendTo(s):(s.addClass(t.classes.dayInactive),e("<span />").text(r).appendTo(s)),r++}e.each([7,14],(e,a)=>{let s=l.slice(l.length-a);if(s.filter("."+t.classes.dayEmpty).length!==a)return!1;s.addClass(t.classes.hidden)})};this.getCalendar=(()=>a),this.getHeader=(()=>a.find("header")),this.getDayWrapper=(()=>a.find("div."+t.classes.dayWrapper)),this.getDaysOfCurrentMonth=(()=>a.find("div."+t.classes.dayWrapper+" > div."+t.classes.day).not("."+t.classes.dayEmpty)),this.getCurrentDate=(()=>n),this.setMonth=(e=>i({month:e-1})),this.setYear=(e=>i({year:e})),this.setDate=(e=>i({year:e.getFullYear(),month:e.getMonth()})),this.navigateBack=((e=1)=>i({month:n.getMonth()-e})),this.navigateForward=((e=1)=>i({month:n.getMonth()+e})),this.gotoToday=(()=>{p(l.getFullYear(),l.getMonth(),l.getDate()).inBounds&&i({year:l.getFullYear(),month:l.getMonth()})}),this.run=(a=>{t=e.extend(!0,{},s,a),n=new Date(t.startDate.getFullYear(),t.startDate.getMonth(),1),u(),r(),g(),y(),t.onInited({calendar:this.getCalendar(),header:this.getHeader(),dayWrapper:this.getDayWrapper(),date:this.getCurrentDate(),daysOfCurrentMonth:this.getDaysOfCurrentMonth()})})};e.fn.calendar=function(t){if(this.length)return this.each((s,n)=>{let l=new a(e(n));l.run(t),e(this).data("calendar",l)})}})(jQuery);